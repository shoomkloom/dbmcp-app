<div class="main-container flex-column px-2 justify-content-center align-items-center">

    <!-- Message container for 'Copied!' feedback -->
    <div id="message-container" class="message-container"></div>

    <!-- Top section with logo and GitHub link -->
    <header class="d-flex justify-content-between align-items-center py-4 px-4">
        <!-- Logo -->
        <div class="logo-container mx-auto position-relative">
            <img src="assets/logo.png" alt="Company Logo" class="img-fluid logo-img">
        </div>
        <!-- GitHub Link -->
        <a href="https://github.com/shoomkloom/dbmcp-server" target="_blank" class="github-link">
        <i class="fab fa-github me-2"></i>
        <span>GitHub</span>
        </a>
    </header>

    <!-- Main content sections -->
    <main class="py-1">
        <!-- Main Title -->
        <h1 class="main-title text-center">Instant DB MCP Server</h1>
        <h5 class="main-title text-center">Provides 11 agent tools to help you query your DB</h5>
        <div class="main-title text-center">Currently supports MongoDB connection strings on Atlas and Azure CosmosDB</div>
        <div class="sub-title text-center">Although I tried to make it non-destructive, it is recommended to use a read-only user</div>
        <div class="sub-title">
            <div class="main-title mt-2">Get started:</div>
            <ol class="steps-list">
                <li>Paste your MongoDB connection string (without password) in the first panel.</li>
                <li>Copy the generated MCP Server URL from the second panel.</li>
                <li>Follow the instructions below to configure your AI assistant with the provided JSON.</li>
                <li><b>DON'T FORGET:</b> Set your password in the AI assistant configuration!</li>
                <li><b>DON'T FORGET</b> Set your DB's firewall to allow access to this IP:208.77.244.15</li>
            </ol>
        </div>

        <!-- Panel 1: MongoDB connection string -->
        <div class="card panel-card mt-3">
            <div class="card-body">
                <h5 class="panel-title">Paste your MongoDB connection string here (no password):</h5>
                <input type="text" id="mongodb-input" 
                    class="form-control" 
                    placeholder="e.g: mongodb+srv://username@cluster0.xxxxx.mongo"
                    [(ngModel)]="connectionString" (ngModelChange)="connectionStringChanged($event)" name="connectionString">
            </div>
        </div>

        <!-- Panel 2: MCP Server URL -->
        <div class="card panel-card">
            <div class="card-body">
                <h5 class="panel-title">Copy the MCP Server URL from here:</h5>
                <div class="input-group">
                    <div 
                        id="mcp-div"
                        class="form-control"
                        style="
                            background-color: #fff;
                            display: block;
                            white-space: pre-wrap;
                            word-break: break-word;
                            overflow-wrap: anywhere;
                        ">
                        {{ mcpUrl }}
                    </div>
                    <button class="btn btn-copy" type="button" (click)="copyToClipboard('mcp-div')">
                        <i class="far fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Panel 3: Connect your AI assistant -->
        <div class="card panel-card">
            <div class="card-body">
                <h5 class="panel-title">Connect your AI assistant:</h5>
                <div class="button-grid">
                    <button class="btn assistant-btn" 
                        [class.active]="isActive('cursor')" 
                        (click)="setActive('cursor')"><img src="assets/cursor.png" class="mx-1">Cursor</button>
                    <button class="btn assistant-btn"
                        [class.active]="isActive('claude')" 
                        (click)="setActive('claude')"><img src="assets/claude.png" class="mx-1">Claude Desktop</button>
                    <button class="btn assistant-btn"
                        [class.active]="isActive('windsurf')" 
                        (click)="setActive('windsurf')"><img src="assets/windsurf.png" class="mx-1">Windsuf</button>
                    <button class="btn assistant-btn"
                        [class.active]="isActive('vscode')" 
                        (click)="setActive('vscode')"><img src="assets/vscode.png" class="mx-1">VSCode</button>
                    <button class="btn assistant-btn"
                        [class.active]="isActive('cline')" 
                        (click)="setActive('cline')"><img src="assets/cline.png" class="mx-1">Cline</button>
                    <!--button class="btn assistant-btn"
                        [class.active]="isActive('highlight')" 
                        (click)="setActive('highlight')"><img src="assets/highlight.png" class="mx-1">Highlight AI</button>
                    -->
                    <button class="btn assistant-btn"
                        [class.active]="isActive('augment')" 
                        (click)="setActive('augment')"><img src="assets/augment.png" class="mx-1">Augment Code</button>
                    <button class="btn assistant-btn"
                        [class.active]="isActive('mysty')" 
                        (click)="setActive('mysty')"><img src="assets/msty.jpg" class="mx-1">Msty AI</button>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-2 mt-3">
                    <p *ngIf="activeAssistant === 'cursor'" class="code-title mb-0">To add this MCP to VSCode, update your <span>.vscode/mcp.json</span> :</p>
                    <p *ngIf="activeAssistant === 'claude'" class="code-title mb-0">To add this MCP to Claude Desktop, update your <span>claude_desktop_config.json</span> :</p>
                    <p *ngIf="activeAssistant === 'windsurf'" class="code-title mb-0">To add this MCP to Windsurf, update your <span>windsurf/mcp_config.json</span> :</p>
                    <p *ngIf="activeAssistant === 'vscode'" class="code-title mb-0">To add this MCP to VSCode, update your <span>.vscode/mcp.json</span> :</p>
                    <p *ngIf="activeAssistant === 'cline'" class="code-title mb-0">To add this MCP to Cline, update your <span>settings/cline_mcp_settings.json</span> :</p>
                    <div *ngIf="activeAssistant === 'augment'" class="code-title mb-0">
                        <li>Open Augment Code settings</li>
                        <li>Navigate to the MCP section</li>
                        <li>Add a new MCP server with the following details</li>
                        <div>Name the MCP server:</div>
                        <span>dbmcp-{{dbuser}}</span> 
                        <div>Use this command:</div>
                        <span>npx mcp-remote ${{mcpUrl}}</span>
                        <div>Or use the following configuration:</div>
                    </div>
                    <p *ngIf="activeAssistant === 'mysty'" class="code-title mb-0">Copy the following JSON configuration:</p>
                    <div class="code-actions">
                        <button class="btn btn-sm btn-action" (click)="copyCode()"><i class="far fa-copy"></i></button>
                    </div>
                </div>
                <div class="code-block" id="code-block-content">
                    <pre>
                        <code>{{ mcpJsonContent }}
                        </code>
                    </pre>
                </div>
            </div>
        </div>
    </main>

  <!-- Footer with links -->
  <footer class="footer-panel w-100">
    <div class="d-flex flex-wrap justify-content-center align-items-center h-100 px-5 gap-3">
      <a href="https://cursor.com/" target="_blank" class="footer-link"><img src="assets/cursor.png" class="mx-1">Cursor</a>
      <a href="https://claude.ai/" target="_blank" class="footer-link"><img src="assets/claude.png" class="mx-1">Claude</a>
      <a href="https://windsurf.com/editor/" target="_blank" class="footer-link"><img src="assets/windsurf.png" class="mx-1">Windsurf</a>
      <a href="https://code.visualstudio.com/" target="_blank" class="footer-link"><img src="assets/vscode.png" class="mx-1">VSCode</a>
      <a href="https://cline.bot/" target="_blank" class="footer-link"><img src="assets/cline.png" class="mx-1">Cline</a>
      <!--<a href="https://highlight.io/" target="_blank" class="footer-link"><img src="assets/highlight.png" class="mx-1">Highlight AI</a>-->
      <a href="https://www.augmentcode.com/" target="_blank" class="footer-link"><img src="assets/augment.png" class="mx-1">Augment Code</a>
      <a href="https://msty.ai/" target="_blank" class="footer-link"><img src="assets/msty.jpg" class="mx-1">Msty AI</a>
    </div>
  </footer>
</div>